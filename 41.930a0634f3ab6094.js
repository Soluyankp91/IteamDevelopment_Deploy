"use strict";(self.webpackChunkTT=self.webpackChunkTT||[]).push([[41],{7041:(H,v,s)=>{s.r(v),s.d(v,{FilmDetailsModule:()=>W});var g=s(6895),p=s(7748),A=s(9300),L=s(4004),r=s(6814);const d=(0,r.ZF)("filmsDetails"),T=(0,r.P1)(d,n=>n.result),C=(0,r.P1)(d,n=>n.isLoading),F=(0,r.P1)(d,n=>n.error),a=(0,r.R7)({source:"Film Details Page",events:{"Film Details Load":(0,r.Ky)(),"Film Details Loaded Success":(0,r.Ky)(),"Character Loaded Fail":(0,r.Ky)(),NO_OP_CACHE:(0,r.uZ)()}});var t=s(1571),y=s(1572),m=s(3646),O=s(781);function D(n,e){1&n&&(t.ynx(0),t._UZ(1,"mat-spinner",4),t.BQk())}function I(n,e){if(1&n&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&n){const i=e.ngIf;t.xp6(2),t.Oqu(i.message)}}function P(n,e){if(1&n&&(t.YNc(0,I,3,1,"ng-container",1),t.ALo(1,"async")),2&n){const i=t.oxw(),l=t.MAs(6);t.Q6J("ngIf",t.lcZ(1,2,i.error$))("ngIfElse",l)}}const U=function(n){return["/characters",n]};function M(n,e){if(1&n&&(t.TgZ(0,"mat-chip",14)(1,"a",15),t._uU(2),t.qZA()()),2&n){const i=e.$implicit;t.Q6J("routerLink",t.VKq(2,U,i)),t.xp6(2),t.Oqu(i)}}function $(n,e){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-list")(2,"div",6),t._uU(3,"Film Details"),t.qZA(),t.TgZ(4,"mat-list-item")(5,"span",7),t._uU(6,"Title"),t.qZA(),t.TgZ(7,"span",8),t._uU(8),t.qZA()(),t.TgZ(9,"mat-list-item")(10,"span",7),t._uU(11,"Producers"),t.qZA(),t.TgZ(12,"span",8),t._uU(13),t.qZA()(),t.TgZ(14,"mat-list-item")(15,"span",7),t._uU(16,"Director"),t.qZA(),t.TgZ(17,"span",8),t._uU(18),t.qZA()(),t.TgZ(19,"mat-list-item")(20,"span",7),t._uU(21,"Release date"),t.qZA(),t.TgZ(22,"span",8),t._uU(23),t.qZA()()(),t.TgZ(24,"div",9)(25,"div",10),t._uU(26,"Opening crawl"),t.qZA(),t.TgZ(27,"div",11),t._uU(28),t.qZA()(),t.TgZ(29,"div",12)(30,"h3",7),t._uU(31,"Character List"),t.qZA(),t.TgZ(32,"mat-chip-listbox"),t.YNc(33,M,3,4,"mat-chip",13),t.qZA()(),t.BQk()),2&n){const i=e.ngIf;t.xp6(8),t.Oqu(null==i.film||null==i.film.properties?null:i.film.properties.title),t.xp6(5),t.Oqu(null==i.film||null==i.film.properties?null:i.film.properties.producer),t.xp6(5),t.Oqu(null==i.film||null==i.film.properties?null:i.film.properties.director),t.xp6(5),t.Oqu(null==i.film||null==i.film.properties?null:i.film.properties.release_date),t.xp6(5),t.Oqu(null==i.film||null==i.film.properties?null:i.film.properties.opening_crawl),t.xp6(5),t.Q6J("ngForOf",null==i.film||null==i.film.properties?null:i.film.properties.characters)}}const q=function(n){return{film:n}};function Y(n,e){if(1&n&&(t.YNc(0,$,34,6,"ng-container",5),t.ALo(1,"async")),2&n){const i=t.oxw();t.Q6J("ngIf",t.VKq(3,q,t.lcZ(1,1,i.film$)))}}const Q=[{path:"",component:(()=>{const e=class{constructor(l,o,f){this.route=l,this.store=o,this.router=f,this.film$=this.store.select(T).pipe((0,A.h)(c=>!!c),(0,L.U)(c=>c[this.filmId])),this.isLoading$=this.store.select(C),this.error$=this.store.select(F),this.filmId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.store.dispatch(a.filmDetailsLoad({id:this.filmId}))}navigateToCharacter(l){this.router.navigate(["../../characters",l],{relativeTo:this.route})}};let n=e;return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.gz),t.Y36(r.yh),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-film-details"]],decls:7,vars:4,consts:[[1,"wrapper"],[4,"ngIf","ngIfElse"],["content",""],["items",""],[1,"spinner"],[4,"ngIf"],["mat-subheader","",1,"header"],["matListItemTitle",""],["matListItemLine",""],[1,"crawl-section"],[1,"card-title"],[1,"card-content"],[1,"characters-section"],["class","chip-link",3,"routerLink",4,"ngFor","ngForOf"],[1,"chip-link",3,"routerLink"],[1,"link"]],template:function(o,f){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,D,2,0,"ng-container",1),t.ALo(2,"async"),t.YNc(3,P,2,4,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(5,Y,2,5,"ng-template",null,3,t.W1O)),2&o){const c=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,f.isLoading$))("ngIfElse",c)}},dependencies:[g.sg,g.O5,p.rH,y.Ou,m.i$,m.Tg,m.gs,m.WW,m.sL,O.HS,O.z2,g.Ov],styles:["[_nghost-%COMP%]{display:block}.spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.wrapper[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]{font-size:20px}.wrap[_ngcontent-%COMP%]{white-space:normal!important}.link[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;text-decoration:none;color:unset}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.characters-section[_ngcontent-%COMP%], .crawl-section[_ngcontent-%COMP%]{padding:15px}.card-title[_ngcontent-%COMP%]{font-weight:400;font-size:16px}.card-content[_ngcontent-%COMP%]{color:#0000008a}  .mat-mdc-chip-action{cursor:pointer!important}  .mat-mdc-chip-action:hover .link{text-decoration:underline}"],changeDetection:0}),n})()}];let S=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(Q),p.Bz]}),n})();var u=s(2655),z=s(3900),x=s(9646),B=s(262),J=s(6194);let N=(()=>{const e=class{constructor(l,o,f){this.actions$=l,this.apiService=o,this.store=f,this.loadFilmDetails$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(a.filmDetailsLoad),(0,u.IC)(c=>this.store.select(T)),(0,z.w)(([c,G])=>G?.[c.id]?(0,x.of)(a.no_op_cache()):this.apiService.getMovieById$(c.id).pipe((0,L.U)(Z=>{const h=Z.result;return h.properties.characters=h.properties.characters.map(k=>k.match(/\d+$/)?.[0]),a.filmDetailsLoadedSuccess({film:h})}),(0,B.K)(Z=>(0,x.of)(a.characterLoadedFail({error:Z.error})))))))}};let n=e;return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.eX),t.LFG(J.s),t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),n})();const w=(0,r.Lq)({result:null,isLoading:!1,error:null},(0,r.on)(a.filmDetailsLoad,n=>({...n,isLoading:!0,error:null})),(0,r.on)(a.filmDetailsLoadedSuccess,(n,{film:e})=>{const i={...n.result};return i[e.uid]=e,{result:i,isLoading:!1,error:null}}),(0,r.on)(a.characterLoadedFail,(n,{error:e})=>({...n,isLoading:!1,error:e})),(0,r.on)(a.no_op_cache,n=>({...n,isLoading:!1})));var E=s(8741);let W=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,S,u.sQ.forFeature(N),r.Aw.forFeature("filmsDetails",w),E.m]}),n})()}}]);